% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/experimental-period-identification.R
\name{pnadc_experimental_periods}
\alias{pnadc_experimental_periods}
\title{Experimental Period Identification Strategies}
\usage{
pnadc_experimental_periods(
  crosswalk,
  data = NULL,
  strategy = c("none", "probabilistic", "upa_aggregation", "both"),
  confidence_threshold = 0.9,
  upa_proportion_threshold = 0.9,
  verbose = TRUE
)
}
\arguments{
\item{crosswalk}{A crosswalk data.table from \code{pnadc_identify_periods()}}

\item{data}{The original PNADC data.table used to build the crosswalk
(required for probabilistic strategy to access date bounds)}

\item{strategy}{Character specifying which strategy to apply.
Options: "none", "probabilistic", "upa_aggregation", "both"}

\item{confidence_threshold}{Numeric (0-1). Minimum confidence required to
assign a probabilistic period. Used by probabilistic and combined strategies.
Default 0.9.}

\item{upa_proportion_threshold}{Numeric (0-1). Minimum proportion of UPA-V1014
observations (within quarter) that must meet criteria for UPA-level assignment.
Used by upa_aggregation and combined strategies. Default 0.9.}

\item{verbose}{Logical. If TRUE, print progress information.}
}
\value{
A modified crosswalk with additional columns:
\itemize{
\item \code{ref_month_exp}: Experimentally assigned month (NA if not assigned)
\item \code{ref_month_exp_confidence}: Confidence of month assignment (0.5-1.0)
\item \code{ref_fortnight_exp}: Experimentally assigned fortnight
\item \code{ref_fortnight_exp_confidence}: Confidence of fortnight assignment
\item \code{ref_week_exp}: Experimentally assigned week
\item \code{ref_week_exp_confidence}: Confidence of week assignment
}
}
\description{
Three experimental strategies are available, all properly nested by period:
\itemize{
\item \strong{probabilistic}: For narrow ranges (2 possible periods),
classifies based on where most of the date interval falls. Assigns only
when confidence exceeds threshold.
\item \strong{upa_aggregation}: Extends strictly identified periods to other
observations in the same UPA-V1014 within the quarter, if a sufficient
proportion already have strict identification.
\item \strong{both}: Combines both strategies - applies probabilistic rule
at UPA-V1014 level when sufficient proportion have narrow ranges.
}
}
\details{
Provides experimental strategies for improving period identification rates
beyond the standard deterministic algorithm. All strategies respect the nested
identification hierarchy: weeks require fortnights, fortnights require months.
\subsection{Nesting Enforcement}{

All strategies enforce proper nesting:
\itemize{
\item Fortnights can only be assigned if month is identified (strictly OR experimentally)
\item Weeks can only be assigned if fortnight is identified (strictly OR experimentally)
}
}

\subsection{Probabilistic Strategy}{

For each period type (processed in order: months, then fortnights, then weeks):
\enumerate{
\item Check that the required parent period is identified
\item If bounds are narrowed to exactly 2 sequential periods, calculate
which period contains most of the date interval
\item Calculate confidence based on the proportion of interval in the likely period
\item Only assign if confidence >= \code{confidence_threshold}
}

For months: aggregates at UPA-V1014 level (but within-quarter, unlike strict algorithm)
For fortnights and weeks: works at household level
}

\subsection{UPA Aggregation Strategy}{

Extends strictly identified periods to all observations in the same UPA-V1014
within the quarter:
\enumerate{
\item Calculate proportion of UPA-V1014 observations with strictly identified period
\item If proportion >= \code{upa_proportion_threshold}, extend to all observations
\item Apply in nested order: months first, then fortnights, then weeks
}
}

\subsection{Combined Strategy ("both")}{

Applies probabilistic rule at UPA-V1014 level when sufficient observations
have narrow ranges:
\enumerate{
\item For each UPA-V1014 within quarter, check if proportion >= threshold
have bounds narrowed to 2 sequential periods
\item If so, apply probabilistic classification at UPA-V1014 level
\item Process in nested order: months, then fortnights, then weeks
}
}
}
\note{
These strategies produce "experimental" assignments, not strict determinations.
The standard \code{pnadc_identify_periods()} function should be used for
rigorous analysis. Experimental outputs are useful for:
\itemize{
\item Sensitivity analysis
\item Robustness checks
\item Research into identification algorithm improvements
}
}
\examples{
\dontrun{
# Build standard crosswalk
crosswalk <- pnadc_identify_periods(pnadc_data)

# Apply experimental strategies
crosswalk_exp <- pnadc_experimental_periods(
  crosswalk,
  pnadc_data,
  strategy = "probabilistic",
  confidence_threshold = 0.9
)

# Check how many additional assignments we get
crosswalk_exp[, .(
  strict = sum(!is.na(ref_month_in_quarter)),
  experimental = sum(!is.na(ref_month_exp)),
  total = sum(!is.na(ref_month_in_quarter) | !is.na(ref_month_exp))
)]
}

}
\seealso{
\code{\link{pnadc_identify_periods}} to build the crosswalk that
this function modifies.
}
