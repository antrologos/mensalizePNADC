<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Experimental Period Identification Strategies — pnadc_experimental_periods • PNADCperiods</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Experimental Period Identification Strategies — pnadc_experimental_periods"><meta name="description" content="Two experimental strategies are available:
probabilistic: For narrow ranges (2 possible fortnights/weeks),
calculates the probability-weighted best guess based on date position
upa_aggregation: Aggregates constraints at UPA level
(experimental - IBGE does NOT interview UPAs together)

"><meta property="og:description" content="Two experimental strategies are available:
probabilistic: For narrow ranges (2 possible fortnights/weeks),
calculates the probability-weighted best guess based on date position
upa_aggregation: Aggregates constraints at UPA level
(experimental - IBGE does NOT interview UPAs together)

"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">PNADCperiods</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/getting-started.html">Get Started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/download-and-prepare.html">Download and Prepare Data</a></li>
    <li><a class="dropdown-item" href="../articles/applied-examples.html">Applied Examples</a></li>
    <li><a class="dropdown-item" href="../articles/annual-poverty-analysis.html">Annual Poverty Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/complex-survey-design.html">Complex Survey Design</a></li>
    <li><a class="dropdown-item" href="../articles/how-it-works.html">How PNADCperiods Works</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/determination-rates-benchmark.html">Benchmark Report</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/antrologos/mensalizePNADC/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Experimental Period Identification Strategies</h1>
      <small class="dont-index">Source: <a href="https://github.com/antrologos/mensalizePNADC/blob/HEAD/R/experimental-period-identification.R" class="external-link"><code>R/experimental-period-identification.R</code></a></small>
      <div class="d-none name"><code>pnadc_experimental_periods.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Two experimental strategies are available:</p><ul><li><p><strong>probabilistic</strong>: For narrow ranges (2 possible fortnights/weeks),
calculates the probability-weighted best guess based on date position</p></li>
<li><p><strong>upa_aggregation</strong>: Aggregates constraints at UPA level
(experimental - IBGE does NOT interview UPAs together)</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">pnadc_experimental_periods</span><span class="op">(</span></span>
<span>  <span class="va">crosswalk</span>,</span>
<span>  data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  strategy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"none"</span>, <span class="st">"probabilistic"</span>, <span class="st">"upa_aggregation"</span>, <span class="st">"both"</span><span class="op">)</span>,</span>
<span>  upa_homogeneity_threshold <span class="op">=</span> <span class="fl">0.8</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-crosswalk">crosswalk<a class="anchor" aria-label="anchor" href="#arg-crosswalk"></a></dt>
<dd><p>A crosswalk data.table from <code><a href="pnadc_identify_periods.html">pnadc_identify_periods()</a></code></p></dd>


<dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>The original PNADC data.table used to build the crosswalk
(required for probabilistic strategy to access date bounds)</p></dd>


<dt id="arg-strategy">strategy<a class="anchor" aria-label="anchor" href="#arg-strategy"></a></dt>
<dd><p>Character vector specifying which strategies to apply.
Options: "none", "probabilistic", "upa_aggregation", "both"</p></dd>


<dt id="arg-upa-homogeneity-threshold">upa_homogeneity_threshold<a class="anchor" aria-label="anchor" href="#arg-upa-homogeneity-threshold"></a></dt>
<dd><p>Numeric. Only apply UPA aggregation if
the measured UPA homogeneity rate exceeds this threshold. Default 0.80.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>Logical. If TRUE, print progress information.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A modified crosswalk with additional columns:</p><ul><li><p><code>ref_fortnight_likely</code>: Probabilistic best guess (NA if range &gt; 2)</p></li>
<li><p><code>ref_fortnight_confidence</code>: Probability of being correct (0.5-1.0)</p></li>
<li><p><code>ref_week_likely</code>: Probabilistic best guess (NA if range &gt; 2)</p></li>
<li><p><code>ref_week_confidence</code>: Probability of being correct (0.5-1.0)</p></li>
<li><p><code>ref_fortnight_upa</code>: UPA-aggregated fortnight (if strategy enabled)</p></li>
<li><p><code>ref_week_upa</code>: UPA-aggregated week (if strategy enabled)</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Provides experimental strategies for improving fortnight and week
identification rates beyond the standard algorithm. These strategies
are for research and testing purposes and should NOT replace the main
identification logic.</p><div class="section">
<h3 id="probabilistic-strategy">Probabilistic Strategy<a class="anchor" aria-label="anchor" href="#probabilistic-strategy"></a></h3>


<p>When the interview date range spans exactly 2 fortnights or weeks, we can
calculate the probability that the interview occurred in the earlier vs later
period based on the relative position of the date range boundaries.</p>
<p>For example, if date_min is day 10 and date_max is day 20, and the fortnight
boundary is day 15, then:</p><ul><li><p>Days 10-15 (6 days) fall in fortnight 1</p></li>
<li><p>Days 16-20 (5 days) fall in fortnight 2</p></li>
<li><p>Probability of fortnight 1: 6/11 ≈ 55%</p></li>
</ul></div>

<div class="section">
<h3 id="upa-aggregation-strategy">UPA Aggregation Strategy<a class="anchor" aria-label="anchor" href="#upa-aggregation-strategy"></a></h3>


<p>This strategy tests whether aggregating constraints at UPA level (across all
households in the same UPA) improves determination rates. This is EXPERIMENTAL
because IBGE does NOT interview entire UPAs on the same day - interviews are
spread across the quarter.</p>
<p>The UPA homogeneity rate (percentage of UPAs where all determined households
have the same fortnight/week) is calculated first. Only if this exceeds the
threshold is UPA aggregation applied.</p>
</div>

    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>These strategies produce "likely" assignments, not definitive determinations.
The standard <code><a href="pnadc_identify_periods.html">pnadc_identify_periods()</a></code> function should be used for
rigorous analysis. These experimental outputs are useful for:</p><ul><li><p>Sensitivity analysis</p></li>
<li><p>Robustness checks</p></li>
<li><p>Research into identification algorithm improvements</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="pnadc_identify_periods.html">pnadc_identify_periods</a></code> to build the crosswalk that
this function modifies.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Build standard crosswalk</span></span></span>
<span class="r-in"><span><span class="va">crosswalk</span> <span class="op">&lt;-</span> <span class="fu"><a href="pnadc_identify_periods.html">pnadc_identify_periods</a></span><span class="op">(</span><span class="va">pnadc_data</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Apply experimental strategies</span></span></span>
<span class="r-in"><span><span class="va">crosswalk_exp</span> <span class="op">&lt;-</span> <span class="fu">pnadc_experimental_periods</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">crosswalk</span>,</span></span>
<span class="r-in"><span>  <span class="va">pnadc_data</span>,</span></span>
<span class="r-in"><span>  strategy <span class="op">=</span> <span class="st">"probabilistic"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Check how many additional "likely" assignments we get</span></span></span>
<span class="r-in"><span><span class="va">crosswalk_exp</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span></span></span>
<span class="r-in"><span>  determined <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">ref_fortnight_in_quarter</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  likely <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">ref_fortnight_likely</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  high_confidence <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">ref_fortnight_confidence</span> <span class="op">&gt;=</span> <span class="fl">0.7</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://orcid.org/0000-0002-5449-6787" class="external-link">Marcos Hecksher</a>, <a href="https://orcid.org/0000-0002-6796-4547" class="external-link">Rogerio Barbosa</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

