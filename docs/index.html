<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Convert Quarterly PNADC Survey Data to Monthly Time Series ‚Ä¢ mensalizePNADC</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Convert Quarterly PNADC Survey Data to Monthly Time Series">
<meta name="description" content='Identifies reference months in Brazils quarterly PNADC (Pesquisa Nacional por Amostra de Domicilios Continua) survey data and optionally computes monthly survey weights. The core algorithm uses IBGEs "Parada Tecnica" (technical break) rules combined with respondent birthdates to determine which month each survey observation refers to. For users needing monthly aggregate estimates, the package also provides hierarchical weight calibration and Bayesian adjustment to produce monthly-appropriate survey weights.'>
<meta property="og:description" content='Identifies reference months in Brazils quarterly PNADC (Pesquisa Nacional por Amostra de Domicilios Continua) survey data and optionally computes monthly survey weights. The core algorithm uses IBGEs "Parada Tecnica" (technical break) rules combined with respondent birthdates to determine which month each survey observation refers to. For users needing monthly aggregate estimates, the package also provides hierarchical weight calibration and Bayesian adjustment to produce monthly-appropriate survey weights.'>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">mensalizePNADC</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="articles/getting-started.html">Get Started</a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/getting-started.html">Getting Started</a></li>
    <li><a class="dropdown-item" href="articles/download-and-prepare.html">Download and Prepare Data</a></li>
    <li><a class="dropdown-item" href="articles/applied-examples.html">Applied Examples</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/antrologos/mensalizePNADC/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="mensalizepnadc">mensalizePNADC<a class="anchor" aria-label="anchor" href="#mensalizepnadc"></a>
</h1></div>
<!-- badges: start -->

<p>Convert Brazil‚Äôs quarterly PNADC survey data into monthly time series.</p>
<p>üìñ <strong><a href="https://antrologos.github.io/mensalizePNADC/">Full Documentation</a></strong> ‚Äî Detailed algorithm explanation with examples and diagrams</p>
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>The <code>mensalizePNADC</code> package identifies reference months in Brazil‚Äôs quarterly PNADC (Pesquisa Nacional por Amostra de Domicilios Continua) survey data and optionally computes monthly survey weights. This enables monthly (instead of quarterly) labor market analysis using PNADC microdata.</p>
<p><strong>Key Features:</strong></p>
<ul>
<li>
<strong>High accuracy</strong>: <strong>97.0%</strong> determination rate on 28.4 million observations (2012-2025) ‚Äî <strong>identical to Stata</strong>
</li>
<li>
<strong>Dynamic exception detection</strong>: Automatically detects quarters needing relaxed timing rules</li>
<li>
<strong>Fast processing</strong>: <strong>~1 minute</strong> for 28.4 million rows (basic mode) ‚Äî ~450,000 rows/sec</li>
<li>
<strong>Minimal dependencies</strong>: Requires <code>data.table</code> and <code>checkmate</code>; <code>sidrar</code> needed only for weight calibration</li>
<li>
<strong>Flexible output</strong>: Returns a crosswalk for easy joins with original data</li>
</ul>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install from GitHub</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"antrologos/mensalizePNADC"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="quick-start">Quick Start<a class="anchor" aria-label="anchor" href="#quick-start"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://antrologos.github.io/mensalizePNADC/">mensalizePNADC</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load stacked quarterly PNADC data (minimum required columns)</span></span>
<span><span class="va">pnadc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/fread.html" class="external-link">fread</a></span><span class="op">(</span><span class="st">"pnadc_stacked.csv"</span>,</span>
<span>  select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Ano"</span>, <span class="st">"Trimestre"</span>, <span class="st">"UPA"</span>, <span class="st">"V1008"</span>, <span class="st">"V1014"</span>, <span class="st">"V2003"</span>,</span>
<span>             <span class="st">"V2008"</span>, <span class="st">"V20081"</span>, <span class="st">"V20082"</span>, <span class="st">"V2009"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get reference month crosswalk</span></span>
<span><span class="va">crosswalk</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/mensalizePNADC.html">mensalizePNADC</a></span><span class="op">(</span><span class="va">pnadc</span><span class="op">)</span></span>
<span><span class="co"># Step 1/1: Identifying reference months...</span></span>
<span><span class="co">#   Determination rate: 97.0%</span></span>
<span></span>
<span><span class="co"># Join with original data</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">original_data</span>, <span class="va">crosswalk</span>,</span>
<span>  by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Ano"</span>, <span class="st">"Trimestre"</span>, <span class="st">"UPA"</span>, <span class="st">"V1008"</span>, <span class="st">"V1014"</span>, <span class="st">"V2003"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Now use ref_month_yyyymm for monthly analysis</span></span>
<span><span class="va">result</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span>n <span class="op">=</span> <span class="va">.N</span><span class="op">)</span>, by <span class="op">=</span> <span class="va">ref_month_yyyymm</span><span class="op">]</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="important-use-stacked-data-for-best-results">Important: Use Stacked Data for Best Results<a class="anchor" aria-label="anchor" href="#important-use-stacked-data-for-best-results"></a>
</h2>
<p>The mensalization algorithm achieves <strong>97.0% determination rate</strong> when processing <strong>stacked multi-quarter data</strong>. If you process quarters individually, you‚Äôll only get ~65-75% determination.</p>
<table class="table">
<thead><tr>
<th>Processing Mode</th>
<th>Determination Rate</th>
</tr></thead>
<tbody>
<tr>
<td>Per-quarter (single quarter)</td>
<td>65-75%</td>
</tr>
<tr>
<td>Stacked (multi-quarter)</td>
<td><strong>97.0%</strong></td>
</tr>
</tbody>
</table>
<p>This is by design: PNADC uses a rotating panel where households are interviewed in the same relative month position each quarter. The algorithm combines birthday constraints from all quarters to narrow down which month the household belongs to.</p>
<p><strong>Recommended</strong>: Stack at least 2 years of quarterly data before calling <code><a href="reference/mensalizePNADC.html">mensalizePNADC()</a></code>.</p>
</div>
<div class="section level2">
<h2 id="required-input-variables">Required Input Variables<a class="anchor" aria-label="anchor" href="#required-input-variables"></a>
</h2>
<p><strong>Minimum (reference month identification only):</strong></p>
<table class="table">
<thead><tr>
<th>Variable</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td><code>Ano</code></td>
<td>Survey year</td>
</tr>
<tr>
<td><code>Trimestre</code></td>
<td>Quarter (1-4)</td>
</tr>
<tr>
<td><code>UPA</code></td>
<td>Primary Sampling Unit</td>
</tr>
<tr>
<td><code>V1014</code></td>
<td>Panel identifier</td>
</tr>
<tr>
<td><code>V1008</code></td>
<td>Household identifier</td>
</tr>
<tr>
<td><code>V2003</code></td>
<td>Person identifier</td>
</tr>
<tr>
<td><code>V2008</code></td>
<td>Birth day (1-31, or 99 for unknown)</td>
</tr>
<tr>
<td><code>V20081</code></td>
<td>Birth month (1-12, or 99 for unknown)</td>
</tr>
<tr>
<td><code>V20082</code></td>
<td>Birth year (or 9999 for unknown)</td>
</tr>
<tr>
<td><code>V2009</code></td>
<td>Age</td>
</tr>
</tbody>
</table>
<p><strong>Additional (for <code>compute_weights = TRUE</code>):</strong></p>
<table class="table">
<thead><tr>
<th>Variable</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td><code>V1028</code></td>
<td>Original quarterly survey weight</td>
</tr>
<tr>
<td><code>UF</code></td>
<td>State code</td>
</tr>
<tr>
<td><code>posest</code></td>
<td>Post-stratification cell</td>
</tr>
<tr>
<td><code>posest_sxi</code></td>
<td>Post-stratification group</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="output-variables">Output Variables<a class="anchor" aria-label="anchor" href="#output-variables"></a>
</h2>
<table class="table">
<colgroup>
<col width="34%">
<col width="20%">
<col width="44%">
</colgroup>
<thead><tr>
<th>Variable</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td><code>ref_month</code></td>
<td>Date</td>
<td>Reference month (first day, e.g., ‚Äú2023-01-01‚Äù)</td>
</tr>
<tr>
<td><code>ref_month_in_quarter</code></td>
<td>Integer</td>
<td>Position in quarter: 1, 2, 3, or NA</td>
</tr>
<tr>
<td><code>ref_month_yyyymm</code></td>
<td>Integer</td>
<td>YYYYMM format (e.g., 202301)</td>
</tr>
<tr>
<td><code>weight_monthly</code></td>
<td>Numeric</td>
<td>Monthly weight (if <code>compute_weights = TRUE</code>); NA for indeterminate observations</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a>
</h2>
<table class="table">
<colgroup>
<col width="43%">
<col width="56%">
</colgroup>
<thead><tr>
<th>Function</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td><code><a href="reference/mensalizePNADC.html">mensalizePNADC()</a></code></td>
<td>Main function: identify months + optional weights</td>
</tr>
<tr>
<td><code><a href="reference/identify_reference_month.html">identify_reference_month()</a></code></td>
<td>Just reference month identification</td>
</tr>
<tr>
<td><code><a href="reference/calibrate_monthly_weights.html">calibrate_monthly_weights()</a></code></td>
<td>Rake weighting for monthly weights</td>
</tr>
<tr>
<td><code><a href="reference/smooth_monthly_aggregates.html">smooth_monthly_aggregates()</a></code></td>
<td>Remove quarterly artifacts from series</td>
</tr>
<tr>
<td><code><a href="reference/calibrate_to_sidra.html">calibrate_to_sidra()</a></code></td>
<td>Optional Bayesian calibration to match SIDRA</td>
</tr>
<tr>
<td><code><a href="reference/fetch_monthly_population.html">fetch_monthly_population()</a></code></td>
<td>Fetch population from SIDRA API</td>
</tr>
<tr>
<td><code><a href="reference/validate_pnadc.html">validate_pnadc()</a></code></td>
<td>Input data validation</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="performance">Performance<a class="anchor" aria-label="anchor" href="#performance"></a>
</h2>
<ul>
<li>
<strong>97.0% determination rate</strong> on 28.4 million observations (2012-2025)</li>
<li>
<strong>~1 minute</strong> for basic processing (28.4M rows) ‚Äî ~450,000 rows/sec</li>
<li>
<strong>~5 minutes</strong> with weight calibration ‚Äî ~95,000 rows/sec</li>
<li>
<strong>Identical results</strong> to the original Stata implementation</li>
</ul>
</div>
<div class="section level2">
<h2 id="documentation">Documentation<a class="anchor" aria-label="anchor" href="#documentation"></a>
</h2>
<ul>
<li>üìñ <strong><a href="https://antrologos.github.io/mensalizePNADC/">Online Documentation</a></strong> ‚Äî Full pkgdown site with function reference</li>
<li>üìñ <strong><a href="https://antrologos.github.io/mensalizePNADC/articles/getting-started.html">Getting Started Vignette</a></strong> ‚Äî Detailed algorithm explanation with diagrams</li>
<li>After installing: <code><a href="articles/getting-started.html">vignette("getting-started", package = "mensalizePNADC")</a></code>
</li>
</ul>
</div>
<div class="section level2">
<h2 id="authors">Authors<a class="anchor" aria-label="anchor" href="#authors"></a>
</h2>
<ul>
<li>
<strong>Marcos Hecksher</strong> - Original methodology and Stata implementation</li>
<li>
<strong>Rogerio Barbosa</strong> - R package maintainer</li>
</ul>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<ul>
<li><a href="https://www.ibge.gov.br/estatisticas/sociais/trabalho/9171-pesquisa-nacional-por-amostra-de-domicilios-continua-mensal.html" class="external-link">IBGE PNADC Documentation</a></li>
<li>Hecksher, M. (2024). Mensalizacao da PNADC. Working paper.</li>
</ul>
</div>
<div class="section level2">
<h2 id="license">License<a class="anchor" aria-label="anchor" href="#license"></a>
</h2>
<p>MIT</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/antrologos/mensalizePNADC/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/antrologos/mensalizePNADC/issues" class="external-link">Report a bug</a></li>
<li><a href="https://www.ibge.gov.br/estatisticas/sociais/trabalho/9171-pesquisa-nacional-por-amostra-de-domicilios-continua-mensal.html" class="external-link">Original methodology (Hecksher 2024)</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing mensalizePNADC</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://orcid.org/0000-0002-5449-6787" class="external-link">Marcos Hecksher</a> <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0003-2992-1252" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li>
<a href="https://orcid.org/0000-0002-6796-4547" class="external-link">Rogerio Barbosa</a> <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-6796-4547" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/antrologos/mensalizePNADC/actions/workflows/pkgdown.yaml" class="external-link"><img src="https://github.com/antrologos/mensalizePNADC/actions/workflows/pkgdown.yaml/badge.svg" alt="pkgdown"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://orcid.org/0000-0002-5449-6787" class="external-link">Marcos Hecksher</a>, <a href="https://orcid.org/0000-0002-6796-4547" class="external-link">Rogerio Barbosa</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
