<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Convert Quarterly PNADC Survey Data to Monthly Time Series ‚Ä¢ mensalizePNADC</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Convert Quarterly PNADC Survey Data to Monthly Time Series">
<meta name="description" content='Identifies reference months in Brazils quarterly PNADC (Pesquisa Nacional por Amostra de Domicilios Continua) survey data and optionally computes monthly survey weights. The core algorithm uses IBGEs "Parada Tecnica" (technical break) rules combined with respondent birthdates to determine which month each survey observation refers to. For users needing monthly aggregate estimates, the package also provides hierarchical weight calibration and Bayesian adjustment to produce monthly-appropriate survey weights.'>
<meta property="og:description" content='Identifies reference months in Brazils quarterly PNADC (Pesquisa Nacional por Amostra de Domicilios Continua) survey data and optionally computes monthly survey weights. The core algorithm uses IBGEs "Parada Tecnica" (technical break) rules combined with respondent birthdates to determine which month each survey observation refers to. For users needing monthly aggregate estimates, the package also provides hierarchical weight calibration and Bayesian adjustment to produce monthly-appropriate survey weights.'>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">mensalizePNADC</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="articles/getting-started.html">Get Started</a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/getting-started.html">Getting Started</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/antrologos/mensalizePNADC/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="mensalizepnadc">mensalizePNADC<a class="anchor" aria-label="anchor" href="#mensalizepnadc"></a>
</h1></div>
<!-- badges: start -->

<p>Convert Brazil‚Äôs quarterly PNADC survey data into monthly time series.</p>
<p>üìñ <strong><a href="https://antrologos.github.io/mensalizePNADC/">Full Documentation</a></strong> ‚Äî Detailed algorithm explanation with examples and diagrams</p>
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>The <code>mensalizePNADC</code> package identifies reference months in Brazil‚Äôs quarterly PNADC (Pesquisa Nacional por Amostra de Domicilios Continua) survey data and optionally computes monthly survey weights. This enables monthly (instead of quarterly) labor market analysis using PNADC microdata.</p>
<p><strong>Key Features:</strong></p>
<ul>
<li>
<strong>High accuracy</strong>: 95.83% determination rate on 28.4 million observations (2012-2025)</li>
<li>
<strong>Fast processing</strong>: 6.3 minutes for 28.4 million rows (basic mode), 8.1 minutes with weight calibration</li>
<li>
<strong>Minimal dependencies</strong>: Requires <code>data.table</code> and <code>checkmate</code>; <code>sidrar</code> needed only for weight calibration</li>
<li>
<strong>Flexible output</strong>: Returns a crosswalk for easy joins with original data</li>
</ul>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install from GitHub</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"antrologos/mensalizePNADC"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="quick-start">Quick Start<a class="anchor" aria-label="anchor" href="#quick-start"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://antrologos.github.io/mensalizePNADC/">mensalizePNADC</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load stacked quarterly PNADC data (minimum required columns)</span></span>
<span><span class="va">pnadc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/fread.html" class="external-link">fread</a></span><span class="op">(</span><span class="st">"pnadc_stacked.csv"</span>,</span>
<span>  select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Ano"</span>, <span class="st">"Trimestre"</span>, <span class="st">"UPA"</span>, <span class="st">"V1008"</span>, <span class="st">"V1014"</span>, <span class="st">"V2003"</span>,</span>
<span>             <span class="st">"V2008"</span>, <span class="st">"V20081"</span>, <span class="st">"V20082"</span>, <span class="st">"V2009"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get reference month crosswalk</span></span>
<span><span class="va">crosswalk</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/mensalizePNADC.html">mensalizePNADC</a></span><span class="op">(</span><span class="va">pnadc</span><span class="op">)</span></span>
<span><span class="co"># Step 1/1: Identifying reference months...</span></span>
<span><span class="co">#   Determination rate: 95.8%</span></span>
<span></span>
<span><span class="co"># Join with original data</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">original_data</span>, <span class="va">crosswalk</span>,</span>
<span>  by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Ano"</span>, <span class="st">"Trimestre"</span>, <span class="st">"UPA"</span>, <span class="st">"V1008"</span>, <span class="st">"V1014"</span>, <span class="st">"V2003"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Now use ref_month_yyyymm for monthly analysis</span></span>
<span><span class="va">result</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span>n <span class="op">=</span> <span class="va">.N</span><span class="op">)</span>, by <span class="op">=</span> <span class="va">ref_month_yyyymm</span><span class="op">]</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="important-use-stacked-data-for-best-results">Important: Use Stacked Data for Best Results<a class="anchor" aria-label="anchor" href="#important-use-stacked-data-for-best-results"></a>
</h2>
<p>The mensalization algorithm achieves <strong>95.83% determination rate</strong> when processing <strong>stacked multi-quarter data</strong>. If you process quarters individually, you‚Äôll only get ~65-75% determination.</p>
<table class="table">
<thead><tr class="header">
<th>Processing Mode</th>
<th>Determination Rate</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Per-quarter (single quarter)</td>
<td>65-75%</td>
</tr>
<tr class="even">
<td>Stacked (multi-quarter)</td>
<td><strong>95.83%</strong></td>
</tr>
</tbody>
</table>
<p>This is by design: PNADC uses a rotating panel where households are interviewed in the same relative month position each quarter (always month 1, always month 2, or always month 3). The algorithm combines birthday constraints from all quarters to narrow down which month the household belongs to.</p>
<p><strong>Recommended</strong>: Stack at least 2 years of quarterly data before calling <code><a href="reference/mensalizePNADC.html">mensalizePNADC()</a></code>.</p>
<hr>
</div>
<div class="section level2">
<h2 id="how-reference-month-identification-works">How Reference Month Identification Works<a class="anchor" aria-label="anchor" href="#how-reference-month-identification-works"></a>
</h2>
<p>The PNADC is collected quarterly, but each interview actually corresponds to a specific <strong>reference week</strong> within the quarter. This package identifies which of the three months in the quarter each observation belongs to.</p>
<div class="section level3">
<h3 id="step-by-step-algorithm">Step-by-Step Algorithm<a class="anchor" aria-label="anchor" href="#step-by-step-algorithm"></a>
</h3>
<div class="section level4">
<h4 id="step-1-determine-valid-interview-saturdays">Step 1: Determine Valid Interview Saturdays<a class="anchor" aria-label="anchor" href="#step-1-determine-valid-interview-saturdays"></a>
</h4>
<p>IBGE‚Äôs ‚ÄúParada Tecnica‚Äù (technical break) rules define when interviews can occur. Each reference week ends on a Saturday, and that Saturday must have at least <strong>4 days</strong> within the reference month.</p>
<p>For each month in the quarter, the algorithm finds the <strong>first valid Saturday</strong>:</p>
<pre><code>Example for Q1 2023:
- January 2023: First Saturday is Jan 7 (has 7 days in Jan) -&gt; Valid
- February 2023: First Saturday is Feb 4 (has 4 days in Feb) -&gt; Valid
- March 2023: First Saturday is Mar 4 (has 4 days in Mar) -&gt; Valid</code></pre>
<p>The possible interview date range for each quarter spans from the first Saturday of month 1 to (first Saturday of month 3 + 21 days).</p>
</div>
<div class="section level4">
<h4 id="step-2-apply-birthday-constraints">Step 2: Apply Birthday Constraints<a class="anchor" aria-label="anchor" href="#step-2-apply-birthday-constraints"></a>
</h4>
<p>Each respondent‚Äôs reported age and birthdate constrains when the interview could have occurred:</p>
<ul>
<li>If <code>Age = Year - BirthYear</code> (visit was <strong>after</strong> birthday): interview must have been on or after the first Saturday following the birthday</li>
<li>If <code>Age = Year - BirthYear - 1</code> (visit was <strong>before</strong> birthday): interview must have been before the birthday</li>
</ul>
<p>For each person, this narrows the possible interview date window.</p>
</div>
<div class="section level4">
<h4 id="step-3-convert-date-ranges-to-month-positions">Step 3: Convert Date Ranges to Month Positions<a class="anchor" aria-label="anchor" href="#step-3-convert-date-ranges-to-month-positions"></a>
</h4>
<p>The narrowed date range is converted to month-in-quarter positions (1, 2, or 3):</p>
<ul>
<li>If minimum possible date falls in month 2, <code>month_min_pos = 2</code>
</li>
<li>If maximum possible date falls in month 1, <code>month_max_pos = 1</code>
</li>
<li>Special handling for dates near month boundaries (within first 3 days)</li>
</ul>
</div>
<div class="section level4">
<h4 id="step-4-aggregate-to-upa-panel-level">Step 4: Aggregate to UPA-Panel Level<a class="anchor" aria-label="anchor" href="#step-4-aggregate-to-upa-panel-level"></a>
</h4>
<p>All individuals in the same <strong>UPA + Panel (V1014)</strong> are interviewed together in the same reference month. The algorithm takes the <strong>intersection</strong> of all individual constraints within each UPA-Panel group:</p>
<pre><code>upa_month_min = max(individual month_min positions)
upa_month_max = min(individual month_max positions)</code></pre>
<p>If <code>upa_month_min == upa_month_max</code>, the reference month is uniquely determined.</p>
</div>
<div class="section level4">
<h4 id="step-5-cross-quarter-aggregation-key-innovation">Step 5: Cross-Quarter Aggregation (Key Innovation)<a class="anchor" aria-label="anchor" href="#step-5-cross-quarter-aggregation-key-innovation"></a>
</h4>
<p>PNADC is a <strong>rotating panel</strong>: the same UPA-V1014 is interviewed in the <strong>same relative month position</strong> (always month 1, always month 2, or always month 3) across all their quarterly visits (up to 5 consecutive quarters).</p>
<p>The algorithm aggregates constraints across ALL quarters for each UPA-V1014, not just within a single quarter. This dramatically improves determination rates:</p>
<ul>
<li>
<strong>Per-quarter</strong>: Only uses birthday constraints from that quarter (~70% determination)</li>
<li>
<strong>Cross-quarter</strong>: Combines constraints from all visits (~96% determination)</li>
</ul>
</div>
<div class="section level4">
<h4 id="step-6-handle-exception-quarters">Step 6: Handle Exception Quarters<a class="anchor" aria-label="anchor" href="#step-6-handle-exception-quarters"></a>
</h4>
<p>Some quarters have non-standard timing rules (technical breaks that cross month boundaries). For quarters 2016t3, 2016t4, 2017t2, 2022t3, and 2023t2, a relaxed rule (minimum 3 days instead of 4) is applied if the standard rule fails to determine the month.</p>
<hr>
</div>
</div>
</div>
<div class="section level2">
<h2 id="how-monthly-weight-calibration-works">How Monthly Weight Calibration Works<a class="anchor" aria-label="anchor" href="#how-monthly-weight-calibration-works"></a>
</h2>
<p>When <code>compute_weights = TRUE</code>, the package computes monthly survey weights that sum to IBGE‚Äôs official monthly population estimates.</p>
<div class="section level3">
<h3 id="step-1-fetch-monthly-population-from-sidra-api">Step 1: Fetch Monthly Population from SIDRA API<a class="anchor" aria-label="anchor" href="#step-1-fetch-monthly-population-from-sidra-api"></a>
</h3>
<p>The function automatically downloads population estimates from IBGE‚Äôs SIDRA API (table 6022).</p>
<p><strong>The Challenge</strong>: SIDRA provides <strong>moving-quarter</strong> population estimates, not exact monthly values. Each SIDRA value represents the 3-month average centered on the middle month:</p>
<table class="table">
<thead><tr class="header">
<th>SIDRA Code</th>
<th>3-Month Window</th>
<th>Represents Population For</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>201203</td>
<td>Jan+Feb+Mar 2012</td>
<td><strong>February 2012</strong></td>
</tr>
<tr class="even">
<td>201204</td>
<td>Feb+Mar+Apr 2012</td>
<td><strong>March 2012</strong></td>
</tr>
<tr class="odd">
<td>201205</td>
<td>Mar+Apr+May 2012</td>
<td><strong>April 2012</strong></td>
</tr>
</tbody>
</table>
<p><strong>Transformation</strong>: The function shifts values to align with their center month: - <code>m_populacao[Feb 2012] = SIDRA value for code 201203</code></p>
<p><strong>Boundary Extrapolation</strong>: The first month (Jan 2012) and latest month have no centered moving quarter. These are extrapolated using quadratic regression on population differences from the nearest 25 observations.</p>
</div>
<div class="section level3">
<h3 id="step-2-hierarchical-rake-weighting">Step 2: Hierarchical Rake Weighting<a class="anchor" aria-label="anchor" href="#step-2-hierarchical-rake-weighting"></a>
</h3>
<p>The original quarterly weights (V1028) are redistributed to months using <strong>iterative proportional fitting</strong> (rake weighting) across nested calibration cells:</p>
<table class="table">
<colgroup>
<col width="36%">
<col width="36%">
<col width="27%">
</colgroup>
<thead><tr class="header">
<th>Cell Level</th>
<th>Definition</th>
<th>Purpose</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>celula1</code></td>
<td>Age groups: 0-13, 14-29, 30-59, 60+</td>
<td>Demographic balance</td>
</tr>
<tr class="even">
<td><code>celula2</code></td>
<td>Post-stratum group + age</td>
<td>Regional-demographic balance</td>
</tr>
<tr class="odd">
<td><code>celula3</code></td>
<td>State (UF) + celula2</td>
<td>State-level balance</td>
</tr>
<tr class="even">
<td><code>celula4</code></td>
<td>Post-stratum (posest) + celula2</td>
<td>Fine geographic balance</td>
</tr>
</tbody>
</table>
<p>At each level, weights are adjusted so that:</p>
<pre><code>sum(weight_new) by (cell, month) / sum(weight_old) by (cell, month)
  = sum(V1028) by (cell, quarter) / sum(weight_old) by (cell, month)</code></pre>
<p>This preserves the quarterly totals while redistributing to months proportionally.</p>
</div>
<div class="section level3">
<h3 id="step-3-final-calibration-to-population-totals">Step 3: Final Calibration to Population Totals<a class="anchor" aria-label="anchor" href="#step-3-final-calibration-to-population-totals"></a>
</h3>
<p>After hierarchical reweighting, a final scaling ensures monthly weighted totals match SIDRA population:</p>
<pre><code><span><span class="va">weight_final</span> <span class="op">=</span> <span class="va">weight_calibrated</span> <span class="op">*</span> <span class="op">(</span><span class="va">SIDRA_population</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">weight_calibrated</span><span class="op">)</span><span class="op">)</span></span></code></pre>
<p>The output <code>weight_monthly</code> is calibrated to match IBGE‚Äôs official monthly population estimates.</p>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="output-variables">Output Variables<a class="anchor" aria-label="anchor" href="#output-variables"></a>
</h2>
<table class="table">
<colgroup>
<col width="34%">
<col width="20%">
<col width="44%">
</colgroup>
<thead><tr class="header">
<th>Variable</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>ref_month</code></td>
<td>Date</td>
<td>Reference month (first day, e.g., ‚Äú2023-01-01‚Äù)</td>
</tr>
<tr class="even">
<td><code>ref_month_in_quarter</code></td>
<td>Integer</td>
<td>Position in quarter: 1, 2, 3, or NA</td>
</tr>
<tr class="odd">
<td><code>ref_month_yyyymm</code></td>
<td>Integer</td>
<td>YYYYMM format (e.g., 202301)</td>
</tr>
<tr class="even">
<td><code>weight_monthly</code></td>
<td>Numeric</td>
<td>Monthly weight (if <code>compute_weights = TRUE</code>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="required-input-variables">Required Input Variables<a class="anchor" aria-label="anchor" href="#required-input-variables"></a>
</h2>
<p><strong>Minimum (reference month identification only):</strong></p>
<table class="table">
<thead><tr class="header">
<th>Variable</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>Ano</code></td>
<td>Survey year</td>
</tr>
<tr class="even">
<td><code>Trimestre</code></td>
<td>Quarter (1-4)</td>
</tr>
<tr class="odd">
<td><code>UPA</code></td>
<td>Primary Sampling Unit</td>
</tr>
<tr class="even">
<td><code>V1014</code></td>
<td>Panel identifier</td>
</tr>
<tr class="odd">
<td><code>V1008</code></td>
<td>Household identifier</td>
</tr>
<tr class="even">
<td><code>V2003</code></td>
<td>Person identifier</td>
</tr>
<tr class="odd">
<td><code>V2008</code></td>
<td>Birth day (1-31, or 99 for unknown)</td>
</tr>
<tr class="even">
<td><code>V20081</code></td>
<td>Birth month (1-12, or 99 for unknown)</td>
</tr>
<tr class="odd">
<td><code>V20082</code></td>
<td>Birth year (or 9999 for unknown)</td>
</tr>
<tr class="even">
<td><code>V2009</code></td>
<td>Age</td>
</tr>
</tbody>
</table>
<p><strong>Additional (for <code>compute_weights = TRUE</code>):</strong></p>
<table class="table">
<thead><tr class="header">
<th>Variable</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>V1028</code></td>
<td>Original quarterly survey weight</td>
</tr>
<tr class="even">
<td><code>UF</code></td>
<td>State code</td>
</tr>
<tr class="odd">
<td><code>posest</code></td>
<td>Post-stratification cell</td>
</tr>
<tr class="even">
<td><code>posest_sxi</code></td>
<td>Post-stratification group</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a>
</h2>
<table class="table">
<colgroup>
<col width="43%">
<col width="56%">
</colgroup>
<thead><tr class="header">
<th>Function</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code><a href="reference/mensalizePNADC.html">mensalizePNADC()</a></code></td>
<td>Main function: identify months + optional weights</td>
</tr>
<tr class="even">
<td><code><a href="reference/identify_reference_month.html">identify_reference_month()</a></code></td>
<td>Just reference month identification</td>
</tr>
<tr class="odd">
<td><code><a href="reference/calibrate_monthly_weights.html">calibrate_monthly_weights()</a></code></td>
<td>Rake weighting for monthly weights</td>
</tr>
<tr class="even">
<td><code><a href="reference/fetch_monthly_population.html">fetch_monthly_population()</a></code></td>
<td>Fetch population from SIDRA API</td>
</tr>
<tr class="odd">
<td><code><a href="reference/validate_pnadc.html">validate_pnadc()</a></code></td>
<td>Input data validation</td>
</tr>
<tr class="even">
<td><code><a href="reference/get_exception_quarters.html">get_exception_quarters()</a></code></td>
<td>List quarters with non-standard timing</td>
</tr>
</tbody>
</table>
<hr>
</div>
<div class="section level2">
<h2 id="performance-results">Performance Results<a class="anchor" aria-label="anchor" href="#performance-results"></a>
</h2>
<p>Tested on 55 quarters (2012Q1 - 2025Q3) with 28,395,273 total observations:</p>
<div class="section level3">
<h3 id="processing-time">Processing Time<a class="anchor" aria-label="anchor" href="#processing-time"></a>
</h3>
<table class="table">
<colgroup>
<col width="17%">
<col width="26%">
<col width="35%">
<col width="20%">
</colgroup>
<thead><tr class="header">
<th>Mode</th>
<th>Loading</th>
<th>Processing</th>
<th>Total</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Basic (<code>compute_weights=FALSE</code>)</td>
<td>17.4 sec</td>
<td>361.2 sec</td>
<td><strong>6.3 minutes</strong></td>
</tr>
<tr class="even">
<td>Weights (<code>compute_weights=TRUE</code>)</td>
<td>15.8 sec</td>
<td>468.6 sec</td>
<td><strong>8.1 minutes</strong></td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="determination-rates-by-period">Determination Rates by Period<a class="anchor" aria-label="anchor" href="#determination-rates-by-period"></a>
</h3>
<table style="width:100%;" class="table">
<colgroup>
<col width="18%">
<col width="22%">
<col width="43%">
<col width="15%">
</colgroup>
<thead><tr class="header">
<th>Period</th>
<th>Quarters</th>
<th>Determination Rate</th>
<th>Notes</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>2012</td>
<td>Q1-Q4</td>
<td>91.8% - 98.9%</td>
<td>First year, panel rotation effects</td>
</tr>
<tr class="even">
<td>2013-2019</td>
<td>28 quarters</td>
<td>96.1% - 99.0%</td>
<td>Best results, stable sampling</td>
</tr>
<tr class="odd">
<td>2020-2021</td>
<td>8 quarters</td>
<td>93.0% - 97.5%</td>
<td>Pandemic sample changes</td>
</tr>
<tr class="even">
<td>2022-2024</td>
<td>12 quarters</td>
<td>91.3% - 95.6%</td>
<td>Post-pandemic normalization</td>
</tr>
<tr class="odd">
<td>2025</td>
<td>Q1-Q3</td>
<td>88.9% - 95.9%</td>
<td>Most recent data</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="overall-statistics">Overall Statistics<a class="anchor" aria-label="anchor" href="#overall-statistics"></a>
</h3>
<ul>
<li>
<strong>Total observations</strong>: 28,395,273</li>
<li>
<strong>Determined</strong>: 27,211,667 (95.83%)</li>
<li>
<strong>Not determined</strong>: 1,183,606 (4.17%)</li>
</ul>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="monthly-weights">Monthly Weights<a class="anchor" aria-label="anchor" href="#monthly-weights"></a>
</h2>
<p>For monthly aggregate estimates, compute monthly-appropriate survey weights:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/mensalizePNADC.html">mensalizePNADC</a></span><span class="op">(</span><span class="va">pnadc_full</span>,</span>
<span>  compute_weights <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Use weight_monthly for estimates</span></span>
<span><span class="va">result</span><span class="op">[</span>, <span class="fu">.</span><span class="op">(</span>pop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">weight_monthly</span><span class="op">)</span><span class="op">)</span>, by <span class="op">=</span> <span class="va">ref_month_yyyymm</span><span class="op">]</span></span></code></pre></div>
<p>The <code>weight_monthly</code> output is calibrated to match IBGE‚Äôs official monthly population estimates from SIDRA table 6022. Average monthly population: ~206 million (matching Brazil‚Äôs population).</p>
<hr>
</div>
<div class="section level2">
<h2 id="topic-specific-calibration-coming-soon">Topic-Specific Calibration (Coming Soon)<a class="anchor" aria-label="anchor" href="#topic-specific-calibration-coming-soon"></a>
</h2>
<p>A future version will include <code><a href="reference/calibrate_to_sidra.html">calibrate_to_sidra()</a></code> for <strong>theme-specific Bayesian calibration</strong> to exactly match IBGE‚Äôs published SIDRA series for specific indicators.</p>
<div class="section level3">
<h3 id="how-it-will-work">How It Will Work<a class="anchor" aria-label="anchor" href="#how-it-will-work"></a>
</h3>
<p>The base <code>weight_monthly</code> from <code><a href="reference/mensalizePNADC.html">mensalizePNADC()</a></code> provides general-purpose monthly weights calibrated to population totals. However, different labor market indicators (unemployment rate, employment level, income) may require slightly different weight adjustments to exactly match IBGE‚Äôs official published series.</p>
<p>The <code><a href="reference/calibrate_to_sidra.html">calibrate_to_sidra()</a></code> function will:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Fetch target series</strong> from SIDRA (e.g., unemployment rate, employment levels)</li>
<li>
<strong>Apply Bayesian adjustment</strong> to weights so that aggregated estimates match the official series</li>
<li>
<strong>Return theme-specific weights</strong> (e.g., <code>weight_sidra_unemployment</code>)</li>
</ol>
<p><strong>Planned themes:</strong></p>
<table style="width:100%;" class="table">
<colgroup>
<col width="17%">
<col width="35%">
<col width="47%">
</colgroup>
<thead><tr class="header">
<th>Theme</th>
<th>SIDRA Tables</th>
<th>What‚Äôs Calibrated</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>unemployment</code></td>
<td>Taxa de desocupacao</td>
<td>Unemployment rate matches IBGE exactly</td>
</tr>
<tr class="even">
<td><code>employment</code></td>
<td>Populacao ocupada</td>
<td>Employment levels match IBGE exactly</td>
</tr>
<tr class="odd">
<td><code>labor_force</code></td>
<td>PEA, PNEA</td>
<td>Labor force participation matches IBGE</td>
</tr>
<tr class="even">
<td><code>income</code></td>
<td>Rendimento habitual</td>
<td>Income aggregates match IBGE</td>
</tr>
<tr class="odd">
<td><code>custom</code></td>
<td>User-provided</td>
<td>User supplies their own target series</td>
</tr>
</tbody>
</table>
<p><strong>Why separate from main function?</strong> Different indicators require different calibrations. The base <code>weight_monthly</code> is self-consistent and general-purpose, while theme-specific weights are optimized for matching specific published series.</p>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="authors">Authors<a class="anchor" aria-label="anchor" href="#authors"></a>
</h2>
<ul>
<li>
<strong>Marcos Hecksher</strong> - Original methodology and Stata implementation</li>
<li>
<strong>Rogerio Barbosa</strong> - R package author</li>
</ul>
</div>
<div class="section level2">
<h2 id="documentation">Documentation<a class="anchor" aria-label="anchor" href="#documentation"></a>
</h2>
<ul>
<li>üìñ <strong><a href="https://antrologos.github.io/mensalizePNADC/">Online Documentation</a></strong> ‚Äî Full pkgdown website with function reference and vignettes</li>
<li>üìñ <strong><a href="https://antrologos.github.io/mensalizePNADC/articles/getting-started.html">Getting Started Vignette</a></strong> ‚Äî Detailed algorithm explanation with diagrams and examples</li>
<li>After installing, run <code><a href="articles/getting-started.html">vignette("getting-started", package = "mensalizePNADC")</a></code> for the rendered version</li>
</ul>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<ul>
<li><a href="https://www.ibge.gov.br/estatisticas/sociais/trabalho/9171-pesquisa-nacional-por-amostra-de-domicilios-continua-mensal.html" class="external-link">IBGE PNADC Documentation</a></li>
<li>Hecksher, M. (2024). Mensalizacao da PNADC. Working paper.</li>
</ul>
</div>
<div class="section level2">
<h2 id="license">License<a class="anchor" aria-label="anchor" href="#license"></a>
</h2>
<p>MIT</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/antrologos/mensalizePNADC/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/antrologos/mensalizePNADC/issues" class="external-link">Report a bug</a></li>
<li><a href="https://www.ibge.gov.br/estatisticas/sociais/trabalho/9171-pesquisa-nacional-por-amostra-de-domicilios-continua-mensal.html" class="external-link">Original methodology (Hecksher 2024)</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing mensalizePNADC</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://orcid.org/0000-0002-5449-6787" class="external-link">Marcos Hecksher</a> <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-5449-6787" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li>
<a href="https://orcid.org/0000-0002-6796-4547" class="external-link">Rogerio Barbosa</a> <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-6796-4547" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/antrologos/mensalizePNADC/actions/workflows/pkgdown.yaml" class="external-link"><img src="https://github.com/antrologos/mensalizePNADC/actions/workflows/pkgdown.yaml/badge.svg" alt="pkgdown"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://orcid.org/0000-0002-5449-6787" class="external-link">Marcos Hecksher</a>, <a href="https://orcid.org/0000-0002-6796-4547" class="external-link">Rogerio Barbosa</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
